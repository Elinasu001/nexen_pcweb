<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>

<%@ taglib prefix="c"      uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn"     uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" 	uri="http://java.sun.com/jsp/jstl/fmt" %>

<%@ page import="com.nexwrms.core.constants.CoreConstants" %>
<%@ page import="com.nexwrms.cfo.com.constants.WebConstants" %>
<%@ page import="com.nexwrms.core.context.AppContext" %>

<link rel="stylesheet" type="text/css" href="/css/o2oserviceintro.css"/>


<!--subContentsWrap-->
<div class="o2oserviceintroWrap">

	<div class="subContents">
		<div class="title-section">
			<h3><span>O2O 서비스</span>란?</h3>
			<p class="desc">
				온라인으로 쉽고 편리하게 주문하고, 방문장착으로 정비해 드리는<br/>
				넥스트레벨만의 프리미엄 고객 맞춤 서비스입니다.
			</p>
		</div>

		<div class="benefit">
			<h3>세상 편리한 Car-life의 시작, <span>O2O 서비스</span></h3>

			<ul>
				<li>
					<div class="benefit-item">
						<div class="ico"><img src="/img/service/o2o/ico_service_01.png" alt=""/></div>
						<div class="subject">맞춤 타이어 추천</div>
						<div class="desc">
							차량번호 검색으로<br/>
							타이어 또는 경정비 항목을
							추천 드립니다.
							<div class="link-box">
								<a href="javascript:openSizeFinder('num');" id="btnCarNumberPop">내 차량 검색</a>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="benefit-item">
						<div class="ico"><img src="/img/service/o2o/ico_service_02.png" alt=""/></div>
						<div class="subject">시간 절약의 편리성</div>
						<div class="desc">
							원하는 장소에서<br/>
							방문장착 서비스로<br/>
							안전하고 편리하게 맡기세요.
							<br/><br/>
							<small class="block">
								- 급하게 타이어를 교체할 때<br/>
								- 시간을 내기 어려울 때
							</small>


						</div>
					</div>
				</li>
				<li>
					<div class="benefit-item">
						<div class="ico"><img src="/img/service/o2o/ico_service_03.png" alt=""/></div>
						<div class="subject">전문적인 서비스</div>
<!-- 						<div class="subject">제조사 직영 서비스</div> -->
						<div class="desc">
<!-- 							믿을 수 있는 넥센타이어의<br/> -->
<!-- 							표준화된 서비스를 전국 동일한<br/> -->
<!-- 							합리적인 가격으로 제공합니다. -->
							안심하고 맡길 수 있는<br/>
							표준화된 서비스를 전국 동일한<br/>
							합리적인 가격으로 제공합니다.
							<!-- <div class="link-box">
								<a href="javascript:;" id="goProduct">상품 보기</a>
								<a href="javascript:;" id="goAgency">전문점 찾기</a>
							</div> -->
						</div>
					</div>
				</li>
				<li>
					<div class="benefit-item">
						<div class="ico"><img src="/img/service/o2o/ico_service_04.png" alt=""/></div>
						<div class="subject">안심 서비스</div>
						<div class="desc">
							전문가 서비스 메뉴얼 준수 /<br/>
							작업 전 후 사진촬영
						</div>
					</div>
				</li>
				<li>
					<div class="benefit-item">
						<div class="ico"><img src="/img/service/o2o/ico_service_05.png" alt=""/></div>
						<div class="subject">부가 서비스</div>
						<div class="desc">
							타이어 장착<small>(TPMS 부착 차량 포함)</small><br/>
							/ 밸런스 / 항균연막탈취를<br/>
							무상으로 제공해 드립니다.
							<br/><br/>
							<!-- <small class="block">
								※ 방문장착 선택 시 쿠폰으로 발급 (유효기간 1년)
							</small> -->

						</div>
					</div>
				</li>
			</ul>



		</div>
	</div>


<a name="tab01">&nbsp;</a>
<a name="tab02">&nbsp;</a>
<a name="tab03">&nbsp;</a>

	<!-- O2O서비스 Tab-->
	<div class="introInfoView">
		<div class="productInfo">
			<!-- tabs -->
			<div class="tabsWrap" >
				<ul class="tabs">
					<li class="active" rel="tab01">방문장착</li>
					<!-- <li class="" rel="tab02">픽업&딜리버리</li> -->
					<li class="" rel="tab03">전문점장착</li>
				</ul>
			</div>
			<!-- tabs -->

			<!-- tab01-->
			<div id="tab01" class="tabContent visit">
				<div class="proInfoView">
					<h3>
						<img src="/img/service/o2o/service_01_title.png" alt="고객이 원하는 곳에서! 위치만 알려주면! 바로 달려갑니다."/>
					</h3>

					<div class="video">
						<iframe width="560" height="315" src="https://www.youtube.com/embed/jd5iiNmCmKA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
					</div>

					<div class="infoStep">
						<img src="/img/service/o2o/service_01_step.png" alt="타이어주문 - 방문장착 출발 - 무료장착 - 작업내역확인">
					</div>

					<div class="serMapInfo">
						<img src="/img/service/o2o/service_011_map.png" alt="비대면의 경우 주차 환경에 따라 요청 시 서비스 매니저에게 키 전달이 필요할 수 있습니다."/>
					</div>
				</div>
			</div>
			<!-- tab01-->

			<!-- tab02-->
			<div id="tab02" class="tabContent pickup">
				<div class="proInfoView">
					<h3>
						<img src="/img/service/o2o/service_02_title.png" alt="고객이 편리하게! 키만 건네주면 픽업한 뒤 다시 배달"/>
					</h3>

					<div class="video">
						<iframe width="560" height="315" src="https://www.youtube.com/embed/LNoZXin6JLw?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
					</div>

					<div class="infoStep">
						<img src="/img/service/o2o/service_02_step.png" alt="타이어주문 - 방문장착 출발 - 무료장착 - 작업내역확인">
					</div>

					<!-- <div class="serMapInfo">
						<img src="/img/service/o2o/service_011_map.png" alt="차량 픽업을 위해 서비스 매니저에게 키를 건네주세요."/>
					</div> -->
				</div>
			</div>
			<!-- tab02-->

			<!-- tab03-->
			<div id="tab03" class="tabContent store">
				<div class="proInfoView">
					<h3>
						<img src="/img/service/o2o/service_03_title.png" alt="고객이 전문매장으로! 원하는 예약시간에 전문매장에서"/>
					</h3>
					<div class="visual-box">
						<img src="/img/service/o2o/service_03_visual.jpg" alt=""/>
					</div>
					<div class="infoStep">
						<img src="/img/service/o2o/service_03_step.png" alt="타이어주문 - 방문장착 출발 - 무료장착 - 작업내역확인">
					</div>

					<div class="serMapInfo">
						<img src="/img/service/o2o/service_03_map.png" alt=""/>
					</div>
				</div>
			</div>
			<!-- tab03-->
		</div>
	</div>
	<!-- O2O서비스 Tab-->

</div>
<!--subContentsWrap-->

<!-- layerPopup > 차량번호 검색 // -->
<div class="popupWrap type02 md-modal-3" id="modal-2" id="carNumberLayerArea"> <!-- md-show -->
	<header class="noLine">
		<a href="#" class="size" id="show02" title="사이즈 확인 툴팁"></a>
		<a href="#" class="layPopClose md-close"></a>
	</header>

	<!--tipShow-->
	<div class="tipShow type02 tip07" id="tipshow02">
		<header>
			<h3 class="type06">타이어 사이즈 확인</h3> <i class="tipOver"></i>
		</header>

		<img src="/img/product/size.png" alt="타이어 사이즈"/>
	</div>
	<!--tipShow-->

	<p class="desc">※ NICE디앤알 빅데이터 기반이며, 소유차량에 대해서 로그인 후 검색 가능합니다.</p>

	<div class="numberSearch">
		<label for="carNumber">차량번호</label>
		<input type="text" name="carNumber" id="carNumber" class="type04" placeholder="차량번호를 입력해 주세요. " onkeydown="enterSchKey();">
		<a href="#" class="searchBtn" id="btnCarNumber"></a>
	</div>

	<!--contents-->
	<div class="popContents">
		<div class="descState">
			<img src="/img/product/desc_img_01.png"  alt=""/>
		</div>

		<div class="searchResult">
		</div>
	</div>
	<!--contents-->

</div>
<!-- layerPopup > 차량번호 검색 // -->

<!-- layerPopup - 나이스 디엔알 검색 완료 // -->
<div class="popupWrap type02 md-modal-3" id="niceResult"> <!-- md-show -->
	<header class="noLine">
		<a href="#" class="size" id="show09" title="사이즈 확인 툴팁"></a>
		<a href="#" class="layPopClose md-close"></a>
	</header>

	<!--tipShow-->
	<div class="tipShow type02 tip07" id="tipshow09">
		<header>
			<h3 class="type06">타이어 사이즈 확인</h3> <i class="tipOver"></i>
		</header>

		<img src="/img/product/size.png" alt="타이어 사이즈"/>
	</div>
	<!--tipShow-->

	<p class="desc">※ NICE디앤알 빅데이터 기반이며, 소유차량에 대해서 로그인 후 검색 가능합니다.</p>

	<div class="numberSearch">
		<label for="carNumber">차량번호</label>
		<input type="text" class="type04" placeholder="차량번호를 입력해 주세요." id="niceResultCarNo" disabled="disabled">
	</div>

	<!--contents-->
	<div class="popContents">
		<div class="searchResult" id="niceResultArea">
		</div>
	</div>
	<!--contents-->
</div>
<!-- layerPopup - 나이스 디엔알 검색 완료 // -->


<!-- 2019-15-17 layerPopup  일반 차종 사이즈 팝업  -->
<div class="popupWrap type02 md-modal-3 md-effect-1" id="modal-23"> <!-- md-show -->
	<header>
		<h2>
			차량번호
			<a href="#" class="size" id="show022" title="사이즈 확인 툴팁"></a>
			<a href="#" class="layPopClose md-close"></a>
		</h2>
	</header>

	<!--tipShow-->
	<div class="tipShow type02 tip07" id="tipshow022">
		<header>
			<h3 class="type06">타이어 사이즈 확인</h3> <i class="tipOver"></i>
		</header>

		<img src="/img/product/size.png" alt="타이어 사이즈"/>
	</div>
	<!--tipShow-->

	<div class="sizeSelectView">
	</div>

	<!--contents-->
	<div class="popContents">
		<div class="alertView">
			<!-- sizeSelect-->

			<div class="sBoxAll"> <!--scrollBox-->
				<div class="sLeftWrap">
					<h3 class="type09">렌탈</h3>
					<!--sLeft-->
					<div class="sLeft" id="rentalSize">
					</div>
					<!--sLeft-->
				</div>
				<div class="sRightWrap">
					<h3 class="type09">구매</h3>
					<!--sRight-->
					<div class="sRight" id="o2oSize">
					</div>
					<!--sRight-->
				</div>
			</div>
			<!-- sizeSelect-->
		</div>
	</div>
	<!--contents-->
</div>
<!-- layerPopup // -->




<!-- layerPopup - 나이스 디엔알 사이즈 선택  // -->
<div class="popupWrap type02 md-modal-3 md-effect-1"  id="niceTireSize"> <!-- md-show -->
	<header>
		<h2>
			차량번호
			<a href="#" class="size" id="show01" title="사이즈 확인 툴팁"></a>
			<a href="#" class="layPopClose md-close"></a>
		</h2>
	</header>

	<!--tipShow-->
	<div class="tipShow type02 tip07" id="tipshow01">
		<header>
			<h3 class="type06">타이어 사이즈 확인</h3> <i class="tipOver"></i>
		</header>

		<img src="/img/product/size.png" alt="타이어 사이즈"/>
	</div>
	<!--tipShow-->

	<div class="mSizeSelectView">
		<p id="niceSizeCarNo"></p>
	</div>

	<!--contents-->
	<div class="popContents">
		<div class="alertView">
			<!-- sizeSelect-->
			<div class="scrollBox" id="niceTireSizeArea">
			</div>
			<!-- sizeSelect-->
		</div>
	</div>
	<!--contents-->

</div>
<div class="md-overlay"></div>
<!-- layerPopup - 나이스 디엔알 사이즈 선택  // -->

<form id="frm" name="frm" action="/product/prdList" method="post">
	<input type="hidden" name="TireSizeNm" id="TireSizeNm" />
	<input type="hidden" name="sectionWidth" id="sectionWidth" />
	<input type="hidden" name="aspectRatio" id="aspectRatio" />
	<input type="hidden" name="wheelInches" id="wheelInches" />
	<input type="hidden" name="plyRating" id="plyRating" />
	<input type="hidden" name="viewGbn" id="viewGbn" />
	<input type="hidden" name="pageNo" id="pageNo" value="1"/>
	<input type="hidden" name="extShape" id="extShape" />
</form>

<script type="text/javascript" src="/js/lib/classie.js"></script>
<script type="text/javascript" src="/js/lib/modalEffects.js"></script>

<script type="text/javascript">
	ex2cts.push('track', 'contents');

	function enterSchKey() {
		var evt_code = (window.netscape) ? ev.which : event.keyCode;
		if (evt_code == 13) {
			event.keyCode = 0;
			$("#btnCarNumber").click();
		}
	}


	$(function(){
		if( document.location.hash.indexOf('tab01') != -1 ){
			$(".tabsWrap li").eq(0).trigger("click");
			$(document).scrollTop( $(document).scrollTop() - 100 );
		}else if( document.location.hash.indexOf('tab03') != -1 ){
			$(".tabsWrap li").eq(1).trigger("click");
			$(document).scrollTop( $(document).scrollTop() - 100 );
		}
	});


	var evManager = {
		//이전 화면 구분 값 : M : 메인  조회 , H : 헤더
		viewGbn : "${viewGbn}"
		,
		loginName : "${userVo.getUsrName()}"
		,
		officerCd : "${userVo.getOfficerCd()}"
		,
		//조회 여부
		searchYn : false
		,
		//필터 선택 수
		filterCnt : 0
		,
		//lifeStyle
		lifeStyleArray : new Array()
		,
		lifeStyleNmArray : new Array()
		,
		niceGradeCd : new Array()
		,
		init : function(){
			//page
			$("#pageNo").val("1");

			console.log(evManager.viewGbn);
			//메인에서 검색 조회 시만 보여 주는 검색  영역
			if(evManager.viewGbn == "M") {
				console.log("메인에서 호출!!!");
				$("#carSearchInfoArea").show();
				$("#btnSearch").show();
				$("#btnSearch").removeClass();
				$("#btnSearch").addClass("reSearch");

				evManager.searchYn = true;
				$("span.filter").text(0);
			} else {
				console.log("해당 페이지에서 호출!!!");

				var sectionWidth = "";
				var aspectRatio = "";
				var wheelInches = "";

				//메인 나이스 디엔알 검색으로 넘어온 경우
				if(evManager.viewGbn == "MC") {
					sectionWidth = "${prdSearchVo.getSectionWidth()}";
					aspectRatio = "${prdSearchVo.getAspectRatio()}";
					wheelInches = "${prdSearchVo.getWheelInches()}";
				}

				var fCarType = new Array();
				fCarType.push("P1");
				$("#fCarType01").prop("checked" , true);

				var fBrand = new Array();
				fBrand.push("NXN");
				$("#fBrand01").prop("checked" , true);

				var fSeason = new Array();
				fSeason.push("01");
				$("#fSeason01").prop("checked" , true);

				var fRentalYn = new Array();
				fRentalYn.push("B");
				fRentalYn.push("R");
				$("#buy01").prop("checked" , true);
				$("#buy02").prop("checked" , true);


				$("#classCd").val("P1");

				evManager.filterCnt = $("input[name='fCarType']:checked").length
				+ $("input[name='fBrand']:checked").length
				+$("input[name='fSeason']:checked").length
				+ $("input[name='fRentalYn']:checked").length;

				$("span.filter").text(evManager.filterCnt);


				//list 조회
				var pUrl = "/product/selectPrdList";
				var pSendData = {
					modelCd 		: ""
					, contentsCd	: ""
					, classCd 		: ""
					, sectionWidth 	: sectionWidth
					, aspectRatio 	: aspectRatio
					, wheelInches 	: wheelInches
					, fCarType 		: fCarType
					, fBrand		: fBrand
					, fSeason		: fSeason
					, fRentalYn		: fRentalYn
					, pageNo		: $("#pageNo").val()
					, pageSize		: '9'
					, orderType		: "pop"
					, searchType 	: "ALL"
					, lifeStyle	: null
				};

				console.log(pSendData)

				evManager.commonAjax(pUrl, pSendData, callBackManager.selectMakePrdList , "I");
			}

			//레이어 팝업 숨김 처리
			$(".scrollBox").hide();

		}
		,
		//공통 AJAX 호출
		commonAjax : function(url, param, callback , gbn) {
			ComUtil.loading();
			$.ajax({
				url: url,
				type: "POST",
				cache:false,
				data: JSON.stringify(param),
				contentType:"application/json;charset=UTF-8",  // ajax 통신으로 보내는 타입
				success: function(data) {
					ComUtil.unloading();
					if(data != null) {
						callback(data , gbn);
					}
				},
				error: function (request, status, error) {
					ComUtil.unloading();
					callBackManager.error(error);

				}
			});
			// end tag -- common ajax call
		}
		,
		//상품 리스트 호출 - 페이지용
		selectPrdList : function (p) {
			$("#pageNo").val(p);
			$("#pageSize").val($("#showPageCnt").val());
			var pUrl = "/product/selectPrdList";
			//파라미터는 공통으로 사용 - evManager.listParam()
			evManager.commonAjax(pUrl, evManager.listParam(), callBackManager.selectMakePrdList , "I");
		}
		,
		listParam : function () {
			//filter 조건
			var chkCnt = 0;
			//차량구분
			var fCarType = new Array();
			$("input[name='fCarType']").each(function(){
				if($(this).is(":checked")) {
					fCarType.push($(this).val());
					chkCnt++;
				}
			});
			//브랜드
			var fBrand = new Array();
			$("input[name='fBrand']").each(function(){
				if($(this).is(":checked")) {
					fBrand.push($(this).val());
					chkCnt++;
				}
			});
			//계절구분
			var fSeason = new Array();
			$("input[name='fSeason']").each(function(){
				if($(this).is(":checked")) {
					fSeason.push($(this).val());
					chkCnt++;
				}
			});
			//렌탈유무
			var fRentalYn = new Array();
			if(!$("input[name='fRentalYn']").is(":checked")) {
				fRentalYn.push("R");
				fRentalYn.push("B");
			} else {
				$("input[name='fRentalYn']").each(function(){
					if($(this).is(":checked")) {
						fRentalYn.push($(this).val());
						chkCnt++;
					}
				});
			}

			evManager.filterCnt = chkCnt;


			var searchType = $("#wheelInches").val() == "" ? "ALL" : "X";

			var pSendData = {
				modelCd 		: $("#modelCd").val()
				, contentsCd	: $("#contentsCd").val()
				, classCd 		: $("#classCd").val()
				, sectionWidth 	: $("#sectionWidth").val()
				, aspectRatio 	: $("#aspectRatio").val()
				, wheelInches 	: $("#wheelInches").val()
				, rentalYn 		: $("#rentalYn").val()
				, fCarType 		: fCarType
				, fBrand		: fBrand
				, fSeason		: fSeason
				, fRentalYn		: fRentalYn
				, pageNo		: $("#pageNo").val()
				, pageSize		: $("#pageSize").val()
				, orderType		: $("#orderType").val()
				, o2oYn			: $("#o2oYn").val()
				, searchType 	: searchType
				, lifeStyle	: evManager.lifeStyleArray
			}

			return pSendData;
		}
	}


	var userLoginId = "${userLoginId}";


	/* ################################# AJAX CALLBACK ARAR #################################  */
	var callBackManager = {
		//에러 처리
		error : function() {
			console.log('error callback : ');
		}
		,
		//나이스 dnr 모델 선택 팝업
		niceGradeList : function(data){
			//완료 팝업 생성
			$("#niceResultCarNo").val($("#carNumber").val().replace(/(\s*)/g, ""));	//타이틀
			//차종 SUV, SEDAN, 나머지..
			$("#extShape").val(data.carInfo.EXT_SHAPE);

			var htmlStr = "";
			htmlStr +="	<div class='infoView'>";
			htmlStr +="		<ul>";
			htmlStr +="			<li>";
			htmlStr +="				<span class='tit'>제조사/차종</span>";
			htmlStr +="				<span class='info'>"+data.carInfo.BRAND_NM +"/"+data.carInfo.REP_CAR_CLASS_NM  +"</span>";
			htmlStr +="			</li>";
			htmlStr +="			<li>";
			htmlStr +="				<span class='tit'>모델</span>";
			htmlStr +="				<span class='info'>"+data.carInfo.CAR_CLASS_NM +"</span>";
			htmlStr +="			</li>";
			htmlStr +="			<li>";
			htmlStr +="				<span class='tit'>엔진타입</span>";
			htmlStr +="				<span class='info'>"+data.carInfo.ENGINE_FORM +"</span>";
			htmlStr +="			</li>";
			htmlStr +="			<li>";
			htmlStr +="         	<button type='button' class='type10 w220' id='btnNiceTireSize' gradeCd="+data.carInfo.CAR_CLASS_NM +">타이어 사이즈 선택<i class='ico01'></i></button>";
			htmlStr +="         </li>";
			htmlStr +="		</ul>";
			htmlStr +="	</div>";
			htmlStr +="		<div class='productView'>";
			htmlStr +="		<img src='"+data.carInfo.CAR_CLASS_REP_IMAGE+"' alt='상품사진'/>";
			htmlStr +="	</div>";
			$("#niceResultArea").html(htmlStr);

			//화면 disabled
			$("#modal-2").removeClass("md-show");
			$("#niceResult").addClass("md-show");
		}
		,
		//나이스 dnr 사이즈 선택 팝업 화면
		selectNiceTireSizeList : function(data) {
			var htmlStr = "";
			for(var i=0; i < data.length; i++) {
				if(i > 0 && (i % 5 == "0") ){
					htmlStr	+= "</ul>";
				}

				if(i == "0" || i % 5 == "0"){
					htmlStr	+= "<ul class='sizeSelect'>";
				}
				htmlStr	+= "<li>";
				htmlStr	  += "   <input type='radio' name='sizeCd' id='sizeCd" + (i+1) + "' value='"+data[i].searchCd+"' sizeNm='"+data[i].description + " "+ data[i].searchCdNm+"' classCd='"+data[i].classCd+"' plyRating='"+data[i].plyRating+"' class='type04'><label for='sizeCd"+(i+1)+"'><span>"+ data[i].searchCdNm + "</span></label>";
				htmlStr	+= "</li>";
			}
			$("#niceTireSizeArea").html();
			$("#niceTireSizeArea").html(htmlStr);

			$("#niceSizeCarNo").text($("#carNumber").val().replace(/(\s*)/g, ""));

			$("#niceResult").removeClass("md-show");
			$("#niceTireSize").addClass("md-show");
			$("#niceTireSizeArea").show();
		}
		,
		//사이즈 선택 팝업
		selectTireSizeList : function(data) {
			var htmlStr = "";
			htmlStr	+= "<div class='os-resize-observer-host'><div class='os-resize-observer observed' style='left: 0px; right: auto;'></div></div>";
			htmlStr	+= "<div class='os-padding'>";
			htmlStr	+= "<div class='os-viewport os-viewport-native-scrollbars-invisible' style='overflow-y: scroll; right: 0px; bottom: 0px;'>";
			htmlStr	+= "<div class='os-content' style='padding: 38px 0px 38px 25px; height: 100%; width: 100%;'>";
			for(var i=0; i < data.length; i++) {
				if(i > 0 && (i % 5 == "0") ){
					htmlStr	+= "</ul>";
				}

				if(i == "0" || i % 5 == "0"){
					htmlStr	+= "<ul class='sizeSelect'>";
				}
				htmlStr	+= "<li>";
				htmlStr	  += "   <input type='radio' name='sizeCd' id='sizeCd" + (i+1) + "' value='"+data[i].searchCd+"' sizeNm='"+data[i].description + " "+ data[i].searchCdNm+"' classCd='"+data[i].classCd+"' plyRating='"+data[i].plyRating+"' class='type04'><label for='sizeCd"+(i+1)+"'><span>"+ data[i].description+ " " + data[i].searchCdNm + "</span></label>";
				htmlStr	+= "</li>";
			}
			htmlStr	+= "</div>";
			htmlStr	+= "</div>";
			htmlStr	+= "</div>";
			htmlStr	+= "<div class='os-scrollbar os-scrollbar-horizontal os-scrollbar-unusable'><div class='os-scrollbar-track os-scrollbar-track-off'><div class='os-scrollbar-handle' style='width: 100%; transform: translate(0px, 0px);'></div></div></div>";
			htmlStr	+= "<div class='os-scrollbar os-scrollbar-vertical'><div class='os-scrollbar-track os-scrollbar-track-off'><div class='os-scrollbar-handle' style='height: 48.6692%; transform: translate(0px, 0px);'></div></div></div>";
			htmlStr	+= "<div class='os-scrollbar-corner'></div>";

			$("#sizeArea").html();
			$("#sizeArea").html(htmlStr);

			var titleHtmlStr = "";
			titleHtmlStr += "<ul>";
			titleHtmlStr += "<li>" + $("#makerNm").val() + "</li>";
			titleHtmlStr += "<li>" + $("#modelNm").val() + "</li>";
			titleHtmlStr += "<li></li>";
			titleHtmlStr += "</ul>";
			$("#modal-5").children(".sizeSelectView").html(titleHtmlStr);

			$("#modal-4").removeClass("md-show");
			//$("#modal-5").addClass("md-show");
			//$(".scrollBox").eq(2).show();
		}
	}
	/* ################################# AJAX CALLBACK ARAR #################################  */



	$(document).ready(function() {

		//evManager.init();

		// 차량검색
		/* $("#btnCarNumberPop").click(function(){
			//window.location = "/product/prdList?viewGbn=H";
			userLoginId = "${userLoginId}";
			if(ValidUtil.isEmpty(userLoginId)) {
				ComUtil.alert("로그인 후 사용 가능합니다.");
				//location.href = "/login/userLogin";
				return;
			}

			//검샘 레이어 팝업 오픈
			$("#modal-2").addClass("md-show");
			//팝업 선택 값 초기화
			$("input[name='carSearch']").prop("checked", false);	//차량간편검색
			//$("input[name='makerCd']").prop("checked", false);		//제조사

		}); */

		//차량 번호 검색 버튼 클릭 이벤트 > 나이스 DNR 연동
		$("#btnCarNumber").on("click" , function(){

			var niceCarNo = $("#carNumber").val().replace(/(\s*)/g, "");

			if(niceCarNo == "") {
				alert("차량번호를 입력해 주세요.");
				return;
			} else {

				//차량번호 패턴
				var pattern1       	= /\d{2}[가-힣ㄱ-ㅎㅏ-ㅣ\x20]\d{4}/g; 				 			// 12저3456
				var pattern2       	= /\d{3}[가-힣ㄱ-ㅎㅏ-ㅣ\x20]\d{4}/g; 				 			// 123저3456 - 신규 찰야 번호
				var pattern3 	   	= /[가-힣ㄱ-ㅎㅏ-ㅣ\x20]{2}\d{2}[가-힣ㄱ-ㅎㅏ-ㅣ\x20]\d{4}/g; 		// 서울12치1234

				if(niceCarNo.length == 7 ){
					if( !pattern1.test(niceCarNo) ){
						ComUtil.alert( "차량번호를 확인하세요.");
						$("#carNumber").val("");
						$("#carNumber").focus();
						return false;
					}
				} else if( niceCarNo.length == 8 &&  ValidUtil.isNumeric( niceCarNo.substring(0,3))){
					if( !pattern2.test(niceCarNo) ){
						ComUtil.alert( "차량번호를 확인하세요.");
						$("#carNumber").val("");
						$("#carNumber").focus();
						return false;
					}
				} else if( niceCarNo.length == 8 || niceCarNo.length == 9){
					if( !pattern2.test(niceCarNo) ){
						ComUtil.alert( "차량번호를 확인하세요.");
						$("#carNumber").val("");
						$("#carNumber").focus();
						return false;
					}
				} else {
					ComUtil.alert( "차량번호를 확인하세요.");
					$("#carNumber").val("");
					$("#carNumber").focus();
					return false;
				}
			}

			ComUtil.loading();

			//나이스 DNR 통신
			$.ajax({
				url: "/product/niceDnrApi",
				type: "POST",
				cache:false,
				data: {carNo:niceCarNo},
				success: function(data) {
					ComUtil.unloading();

					if(data.code == "000") {
						//console.log(data.carInfo)
						//console.log(data.gradeList)
						evManager.niceGradeCd = [];
						for(var i=0; i<data.gradeList.length; i++) {
							evManager.niceGradeCd.push(data.gradeList[i].CAR_GRADE_NBR);
						}
						callBackManager.niceGradeList(data);
					} else if(data.code == "014") {
						ComUtil.alert("로그인을 해주세요")
					} else if(data.code == "014") {
						ComUtil.alert("로그인이 필요합니다. 로그인 화면으로 이동 하시겠습니까?");
						location.href = "/login/userLogin";
						return;
					} else if(data.code == "022") {
						ComUtil.alert("차량번호 또는 소유자명 불일치");
						return;
					} else {
						ComUtil.alert("시스템 오류. ("+ data.code+")");
						return;
					}

				},
				error: function (request, status, error) {
					ComUtil.unloading();
					callBackManager.error(error);
				}
			});

		});
		// -- end tag

		//나이스 디엔알 검색 완료 화면 다음 버튼 - 사이즈 선택 화면 오픈
		$(document).on("click","#btnNiceTireSize" , function(){
			//사이즈 목록 조회

			var pUrl = "/product/selectTireSizeList";
			var extShape = $('#extShape').val();

			if(extShape.indexOf("SEDAN") != -1){
				classCd	= "P1";
			}else if(extShape.indexOf("SUV") != -1){
				classCd	= "S1";
			}else{
				classCd	= "V1";
			}

			var	pRental = {classCd:classCd, niceGradeCd:evManager.niceGradeCd, systemGbn:"R"};
			$.ajax({
				url: "/product/selectTireSizeList",
				type: "POST",
				cache:false,
				data: JSON.stringify(pRental),
				contentType:"application/json;charset=UTF-8",  // ajax 통신으로 보내는 타입
				success: function(data) {
					if(data != null) {
						var htmlStr = "";
						for(var i=0; i < data.length; i++) {
							if(i > 0 && (i % 2 == "0") ){
								htmlStr	+= "</ul>";
							}

							if(i == "0" || i % 2 == "0"){
								htmlStr	+= "<ul class='sizeSelect'>";
							}
							htmlStr	+= "<li>";
							htmlStr	  += "   <input type='radio' name='sizeCd' id='sizeCdR" + (i+1) + "' value='"+data[i].searchCd+"' sizeNm='"+data[i].description + " "+ data[i].searchCdNm+"' classCd='"+data[i].classCd+"' plyRating='"+data[i].plyRating+"' matCd='"+data[i].matCd+"' frCd='"+data[i].frCd+"' systemTab='R' class='type04'><label for='sizeCdR"+(i+1)+"'><span>"+ data[i].description + " "+ data[i].searchCdNm + "</span></label>";
							htmlStr	+= "</li>";
						}

						$("#rentalSize").html();
						$("#rentalSize").html(htmlStr);

						var	pO2o = {classCd:classCd, niceGradeCd:evManager.niceGradeCd, systemGbn:"DD"};
						$.ajax({
							url: "/product/selectTireSizeList",
							type: "POST",
							cache:false,
							data: JSON.stringify(pO2o),
							contentType:"application/json;charset=UTF-8",  // ajax 통신으로 보내는 타입
							success: function(data) {
								if(data != null) {
									var htmlStr1 = "";
									for(var i=0; i < data.length; i++) {
										if(i > 0 && (i % 2 == "0") ){
											htmlStr1	+= "</ul>";
										}

										if(i == "0" || i % 2 == "0"){
											htmlStr1	+= "<ul class='sizeSelect'>";
										}
										htmlStr1	+= "<li>";
										htmlStr1	  += "   <input type='radio' name='sizeCd' id='sizeCdO" + (i+1) + "' value='"+data[i].searchCd+"' sizeNm='"+data[i].description + " "+ data[i].searchCdNm+"' classCd='"+data[i].classCd+"' plyRating='"+data[i].plyRating+"' matCd='"+data[i].matCd+"' frCd='"+data[i].frCd+"' systemTab='O' class='type04'><label for='sizeCdO"+(i+1)+"'><span>"+ data[i].description + " "+ data[i].searchCdNm + "</span></label>";
										htmlStr1	+= "</li>";
									}

									$("#o2oSize").html();
									$("#o2oSize").html(htmlStr1);

									var titlehtmlStr1 = "";
									titlehtmlStr1 += "<ul>";
									titlehtmlStr1 += "<li>" +$ ("#carNumber").val() + "</li>";
									titlehtmlStr1 += "</ul>";

									$("#modal-23").children(".sizeSelectView").html(titlehtmlStr1);

									$("#niceResult").removeClass("md-show");
									$("#modal-23").addClass("md-show");
									$(".scrollBox").eq(2).show();
								}
							},
							error: function (request, status, error) {
								/* $('#loadingWrapnew').css("display","none"); */
								callBackManager.error(error);
							}
						});

					}
				},
				error: function (request, status, error) {
					/* $('#loadingWrapnew').css("display","none"); */
					callBackManager.error(error);
				}
			});

			//evManager.commonAjax(pUrl, pSendData, callBackManager.selectNiceTireSizeList);








		});
		// -- end tag

		//사이즈 , 인치 선택 이벤트 > 사이즈 , 인치 선택 화면 오픈
		$(document).on("click","input[name='sizeCd']" , function(){
			var gbn = ""; //이벤트 구분 - 화면이 틀려짐
			$("#viewGbn").val("MC");
			$("#TireSizeCd").val($(this).val());
			$("#TireSizeNm").val($(this).attr("sizeNm"));
			$("#sectionWidth").val($(this).val().split("^")[0]);
			$("#aspectRatio").val($(this).val().split("^")[1]);
			$("#wheelInches").val($(this).val().split("^")[2]);
			$("#plyRating").val($(this).attr("plyRating"));
			$("#frm").submit();
		});
		// -- end tag

		// 상품둘러보기
		$("#goProduct").click(function(){
			window.location = "/product/prdList?viewGbn=H";
		});

		// 전문점 찾기
		$("#goAgency").click(function(){
			window.location = "/bbs/specialDealerList";
		});

	});

</script>
